---
- hosts:
  become: yes
  become_user: root
  tasks:
    - name: Install httpd on linux 7 #/this step will install latest apache
      yum:
        name: httpd
        state: latest

    - name: create user 'apache'
      user:
        name: apache
        group: apache
        append: yes

    - name: asign user 'apache' to 'httpd' folder
        path: /etc/httpd
        owner: apache
        group: apache
        mode: 0644
        recursive: yes

    #/you need to configure httpd.conf
    - name: Configure 'httpd.conf'
      copy:
        src: /etc/ansible/main_site/prod/fe_servers/httpd.conf
        dest: /etc/ansible/apache/files
        owner: apache
        group: apache
        mode: 0644
        backup: yes

    #/load neccessary modules

    - name: load modules
      copy:
        src: /etc/ansible/main_site/prod/fe_server/php.modules
        dest: /etc/ansible/apache/files
        owner: apache
        group: apache
        mode: 0644
        backup: yes




